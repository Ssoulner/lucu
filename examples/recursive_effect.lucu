effect print {
	fun print(n int)
}

fun put_binary_until(max int) / print {

	if max == 1 {

		print(0)

	} else if max == 2 {

		print(0)
		print(1)

	} else {

		try {

			put_binary_until(max / 2)

		} with print {

			fun print(n int) {
				print(n * 10 + 0)
				print(n * 10 + 1)
			}

		}

	}

}

fun main() / debug {

	try {
		
		put_binary_until(8)

	} with print {

		fun print(n int) {
			putint(n)
		}

	}

	## expected output:
	# 0
	# 1
	# 10
	# 11
	# 100
	# 101
	# 110
	# 111

}
